{"version":3,"sources":["scripts/gallery.js"],"names":["Gallery","gallery","Error","images","Array","from","querySelectorAll","modal","document","querySelector","prevButton","nextButton","showNextImage","bind","showPrevImage","handleKeyUp","handleClickOutside","forEach","image","addEventListener","e","showImage","currentTarget","key","prototype","openModal","matches","classList","add","window","closeModal","remove","removeEventListener","target","currentImage","nextElementSibling","firstElementChild","previousElementSibling","lastElementChild","el","src","textContent","title","dataset","description","console","info","gallery1","gallery2"],"mappings":"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","file":"gallery.e7f1279a.js","sourceRoot":"..","sourcesContent":["function Gallery(gallery) {\n  if (!gallery) {\n    throw new Error('Gallery not found!');\n  }\n\n  this.gallery = gallery;\n\n  // select the elements I need\n  this.images = Array.from(gallery.querySelectorAll('img'));\n  this.modal = document.querySelector('.modal');\n  this.prevButton = this.modal.querySelector('.prev');\n  this.nextButton = this.modal.querySelector('.next');\n\n  // Bind the methods to the instance when I need them\n  // These need to have access to 'this'\n  this.showNextImage = this.showNextImage.bind(this);\n  this.showPrevImage = this.showPrevImage.bind(this);\n  this.handleKeyUp = this.handleKeyUp.bind(this);\n  this.handleClickOutside = this.handleClickOutside.bind(this);\n\n  // All event listeners\n  this.images.forEach(image => image.addEventListener('click', e => this.showImage(e.currentTarget)));\n\n  this.images.forEach(image => {\n    image.addEventListener('keyup', e => {\n      if(e.key === 'Enter') {\n        this.showImage(e.currentTarget);\n      }\n    });\n  });\n\n  this.modal.addEventListener('click', this.handleClickOutside);\n}\n\nGallery.prototype.openModal = function() {\n  // first check if modal is already open\n  if (this.modal.matches('.open')) {\n    return; // stop function from running\n  }\n\n  this.modal.classList.add('open');\n\n  // Event listeners to be bound when modal is opened\n  window.addEventListener('keyup', this.handleKeyUp);\n  this.nextButton.addEventListener('click', this.showNextImage);\n  this.prevButton.addEventListener('click', this.showPrevImage);\n}\n\nGallery.prototype.closeModal = function() {\n  this.modal.classList.remove('open');\n  // cleanup listeners. these only need to exist when a modal is open\n  window.removeEventListener('keyup', this.handleKeyUp);\n  this.nextButton.removeEventListener('click', this.showNextImage);\n  this.prevButton.removeEventListener('click', this.showPrevImage);\n}\n\nGallery.prototype.handleClickOutside = function(e) {\n  if (e.target === e.currentTarget) {\n    this.closeModal();\n  }\n}\n\nGallery.prototype.handleKeyUp = function(e) {\n  // adding a return prevents the function from checking each key\n  if (e.key === 'Escape') return this.closeModal();\n  if (e.key === 'ArrowRight') return this.showNextImage();\n  if (e.key === 'ArrowLeft') return this.showPrevImage();\n}\n\nGallery.prototype.showNextImage = function() {\n  // If there are no more images, go back to the first image\n  this.showImage(this.currentImage.nextElementSibling ||\n    this.gallery.firstElementChild);\n}\n\nGallery.prototype.showPrevImage = function() {\n  this.showImage(this.currentImage.previousElementSibling ||\n    this.gallery.lastElementChild);\n}\n\nGallery.prototype.showImage = function(el) {\n  if (!el) { // safety net\n    console.info('no image to show');\n    return;\n  }\n\n  // update the modal with this info\n  this.modal.querySelector('img').src = el.src;\n  this.modal.querySelector('h2').textContent = el.title;\n  this.modal.querySelector('figure p').textContent = el.dataset.description;\n  this.currentImage = el;\n  this.openModal();\n}\n\nconst gallery1 = new Gallery(document.querySelector('.gallery1'));\nconst gallery2 = new Gallery(document.querySelector('.gallery2'));"]}