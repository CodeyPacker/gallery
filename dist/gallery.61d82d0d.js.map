{"version":3,"sources":["scripts/gallery.js"],"names":["Gallery","gallery","Error","images","Array","from","querySelectorAll","modal","document","querySelector","prevButton","nextButton","showNextImage","bind","showPrevImage","handleKeyUp","handleClickOutside","forEach","image","addEventListener","e","showImage","currentTarget","key","prototype","openModal","matches","classList","add","window","closeModal","remove","removeEventListener","target","currentImage","nextElementSibling","firstElementChild","previousElementSibling","lastElementChild","el","console","info","src","textContent","title","dataset","description","gallery1","gallery2"],"mappings":"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","file":"gallery.61d82d0d.js","sourceRoot":"..","sourcesContent":["function Gallery(gallery) {\n  if (!gallery) {\n    throw new Error('Gallery not found!');\n  }\n\n  this.gallery = gallery;\n\n  // select the elements I need\n  this.images = Array.from(gallery.querySelectorAll('img'));\n  this.modal = document.querySelector('.modal');\n  this.prevButton = this.modal.querySelector('.prev');\n  this.nextButton = this.modal.querySelector('.next');\n\n  // Bind the methods to the instance when I need them\n  // These need to have access to 'this'\n  this.showNextImage = this.showNextImage.bind(this);\n  this.showPrevImage = this.showPrevImage.bind(this);\n  this.handleKeyUp = this.handleKeyUp.bind(this);\n  this.handleClickOutside = this.handleClickOutside.bind(this);\n\n  // All event listeners\n  this.images.forEach(image => image.addEventListener('click', e => this.showImage(e.currentTarget)));\n\n  this.images.forEach(image => {\n    image.addEventListener('keyup', e => {\n      if(e.key === 'Enter') {\n        this.showImage(e.currentTarget);\n      }\n    });\n  });\n\n  this.modal.addEventListener('click', this.handleClickOutside);\n}\n\nGallery.prototype.openModal = function() {\n  // first check if modal is already open\n  if (this.modal.matches('.open')) {\n    return; // stop function from running\n  }\n\n  this.modal.classList.add('open');\n\n  // Event listeners to be bound when modal is opened\n  window.addEventListener('keyup', this.handleKeyUp);\n  this.nextButton.addEventListener('click', this.showNextImage);\n  this.prevButton.addEventListener('click', this.showPrevImage);\n}\n\nGallery.prototype.closeModal = function() {\n  this.modal.classList.remove('open');\n  // cleanup listeners. these only need to exist when a modal is open\n  window.removeEventListener('keyup', this.handleKeyUp);\n  this.nextButton.removeEventListener('click', this.showNextImage);\n  this.prevButton.removeEventListener('click', this.showPrevImage);\n}\n\nGallery.prototype.handleClickOutside = function(e) {\n  if (e.target === e.currentTarget) {\n    this.closeModal();\n  }\n}\n\nGallery.prototype.handleKeyUp = function(e) {\n  // adding a return prevents the function from checking each key\n  if (e.key === 'Escape') return this.closeModal();\n  if (e.key === 'ArrowRight') return this.showNextImage();\n  if (e.key === 'ArrowLeft') return this.showPrevImage();\n}\n\nGallery.prototype.showNextImage = function() {\n  // If there are no more images, go back to the first image\n  this.showImage(this.currentImage.nextElementSibling ||\n    this.gallery.firstElementChild);\n}\n\nGallery.prototype.showPrevImage = function() {\n  this.showImage(this.currentImage.previousElementSibling ||\n    this.gallery.lastElementChild);\n}\n\nGallery.prototype.showImage = function(el) {\n  if (!el) { // safety net\n    console.info('no image to show');\n    return;\n  }\n\n  // update the modal with this info\n  this.modal.querySelector('img').src = el.src;\n  this.modal.querySelector('h2').textContent = el.title;\n  this.modal.querySelector('figure p').textContent = el.dataset.description;\n  this.currentImage = el;\n  this.openModal();\n}\n\nconst gallery1 = new Gallery(document.querySelector('.gallery1'));\nconst gallery2 = new Gallery(document.querySelector('.gallery2'));"]}